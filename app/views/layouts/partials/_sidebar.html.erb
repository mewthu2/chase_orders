<aside class="left-menu">
  <div class="aside-inner">
    <div class="d-flex justify-content-center flex-shrink-0 p-3 text-white">
      <ul class="nav nav-pills flex-column mb-auto">
        <a class="btn btn-dark w-100 text-info mb-3" href="/" role="button">
          <i class="fas fa-house"></i> Home
        </a>

        <a class="btn btn-dark w-100 text-info mb-3" data-bs-toggle="collapse" href="#collase-dashboard" role="button" aria-expanded="false" aria-controls="collase-dashboard">
          <i class="justify-content-center fas fa-concierge-bell"></i> Dashboard <i class="fa fa-angle-down arrow"></i>
        </a>
        <ul class="flex-column mb-auto collapse mb-2" id="collase-dashboard">
           <div class="mb-3"> <i class="fa-solid fa-plus"></i><%= link_to dashboard_index_path, class: 'text-light' do %> <span> Acompanhamento </span><% end %></div>
        </ul>

        <a class="justify-content-center btn btn-dark w-100 text-info mb-3" data-bs-toggle="collapse" href="#collase-tiny" role="button" aria-expanded="false" aria-controls="collase-tiny">
          <i class="justify-content-center fas fa-list"></i> Pedidos <i class="fa fa-angle-down arrow"></i>
        </a>
        <ul class="flex-column mb-auto collapse mb-3" id="collase-tiny">
           <div class="mb-3"> <i class="fa-solid fa-plus"></i><%= link_to orders_tiny_dashboard_index_path(situacao: 'preparando_envio'), class: 'text-light' do %> <span> Tiny ERP </span><% end %></div>
        </ul>

        <a class="btn btn-dark w-100 text-info mb-3" data-bs-toggle="collapse" href="#collase-attempts" role="button" aria-expanded="false" aria-controls="collase-correios">
          <i class="fa-regular fa-hourglass"></i> Histórico de Tentativas <i class="fa fa-angle-down arrow"></i>
        </a>
        <ul class="justify-content-center flex-column mb-auto collapse mb-3" id="collase-attempts">
          <div class="mb-3"> <i class="fa-solid fa-plus"></i><%= link_to attempts_path(status: :success), class: 'text-light' do %> <span> Fila de Criação de Pedido no Correios </span><% end %></div>
        </ul>
        <ul class="justify-content-center flex-column mb-auto collapse mb-3" id="collase-attempts">
          <div class="mb-3"> <i class="fa-solid fa-plus"></i><%= link_to send_xml_attempts_path(status: :success), class: 'text-light' do %> <span> Fila de Envio de XML para o Correios </span><% end %></div>
        </ul>
      </ul>
    </div>
  </div>
  <hr>
  <span class="d-flex justify-content-center"> Buscar código de rastreio: </span>
  <div class="container d-flex justify-content-center mt-2">
    <input class="form-control" id="tracking_number" placeholder="Digite o número do pedido">
    <button class="btn btn-dark text-secondary"id="search_button">Procurar</button>
  </div>
  <div class="container">
    <span class="badge bg-secondary w-100 text-info">
      <i id="loading" class="fa-regular fa-compass"></i>
      <div class="container mt-2 h5 d-flex justify-content-center" id="tracking_result"></div>
    </span>
  </div>
  <div class="d-flex justify-content-center" style="margin-top: 23em;">
    <small class="text-light"> Chase Brasil <i class="fas fa-registered"></i></small>
  </div>
</aside>
<script>
  $(document).ready(function() {
    $('#search_button').click(function() {
      var trackingNumber = $('#tracking_number').val();
      $('#loading').addClass('fa-spin');
      $.ajax({
        url: '<%= tracking_dashboard_index_path %>',
        type: 'GET',
        data: { tracking_number: trackingNumber },
        dataType: 'json',
        success: function(response) {
          if (response) {
            $('#tracking_result').html(response[0]['codigoObjeto']);
          } else {
            $('#tracking_result').html('Nenhum resultado encontrado.');
          }
          $('#loading').removeClass('fa-spin');
        },
        error: function() {
          $('#tracking_result').html('Erro ao buscar informações de rastreamento.');
        }
      });
    });
  });
</script>